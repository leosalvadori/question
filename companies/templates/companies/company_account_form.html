{% extends 'base.html' %}

{% block title %}Nova Conta API - {{ company.name }}{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
	<div class="mb-6">
		<h1 class="text-2xl font-semibold">Nova Conta API</h1>
		<p class="text-sm text-muted-foreground mt-1">Empresa: <strong>{{ company.name }}</strong></p>
	</div>
	
	{% if messages %}
	<div class="mb-4">
		{% for message in messages %}
		<div class="p-4 rounded-lg {% if message.tags == 'error' %}bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-300{% else %}bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300{% endif %}">
			{{ message }}
		</div>
		{% endfor %}
	</div>
	{% endif %}
	
	<form method="post" class="space-y-5 glass-effect p-6 rounded-xl border border-border/40">
		{% csrf_token %}
		
		<div>
			<label for="username" class="block text-sm font-medium mb-2">
				Username *
			</label>
			<input 
				type="text" 
				id="username"
				name="username" 
				required
				value="{{ username|default:'' }}"
				pattern="[a-zA-Z0-9_-]+"
				title="Use apenas letras, números, _ e -"
				class="w-full px-3 py-2 border border-border rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-primary"
				placeholder="ex: empresa_app_mobile">
			<p class="text-xs text-muted-foreground mt-1">
				Use apenas letras, números, underscores (_) e hífens (-)
			</p>
		</div>
		
		<div>
			<label for="password" class="block text-sm font-medium mb-2">
				Senha *
			</label>
			<input 
				type="password" 
				id="password"
				name="password" 
				required
				minlength="8"
				class="w-full px-3 py-2 border border-border rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-primary"
				placeholder="Mínimo 8 caracteres">
			<p class="text-xs text-muted-foreground mt-1">
				⚠️ Guarde esta senha em local seguro. Não será possível recuperá-la depois.
			</p>
		</div>
		
		<div>
			<label for="label" class="block text-sm font-medium mb-2">
				Rótulo (opcional)
			</label>
			<input 
				type="text" 
				id="label"
				name="label" 
				value="{{ label|default:'' }}"
				maxlength="100"
				class="w-full px-3 py-2 border border-border rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-primary"
				placeholder="ex: App Mobile Produção">
			<p class="text-xs text-muted-foreground mt-1">
				Descrição opcional para identificar o propósito desta conta
			</p>
		</div>
		
		<div class="pt-4 flex gap-3">
			<button 
				type="submit" 
				class="px-6 py-2 bg-primary text-primary-foreground rounded-lg hover:opacity-90 transition-opacity">
				✓ Criar Conta
			</button>
			<a 
				href="{% url 'company_accounts' company.id %}" 
				class="px-6 py-2 border border-border rounded-lg hover:bg-accent transition-colors">
				Cancelar
			</a>
		</div>
	</form>
	
	<div class="mt-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800">
		<h3 class="font-semibold mb-2 text-yellow-900 dark:text-yellow-100">⚠️ Importante:</h3>
		<ul class="text-sm text-yellow-800 dark:text-yellow-200 space-y-1">
			<li>• A senha será armazenada de forma criptografada</li>
			<li>• Não será possível visualizar a senha depois de criada</li>
			<li>• Guarde as credenciais em um local seguro (gerenciador de senhas)</li>
			<li>• Se perder a senha, será necessário criar uma nova conta</li>
		</ul>
	</div>
</div>
{% endblock %}
